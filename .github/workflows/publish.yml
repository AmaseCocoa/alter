name: Publish Crate

on:
  push:
    tags:
      - 'v[0-9]+.[0-9]+.[0-9]+*'

permissions:
  id-token: write

jobs:
  publish:
    runs-on: ubuntu-latest
    
    container:
      image: rust:latest

    steps:
      - name: ğŸ—„ï¸ Checkout repository
        uses: actions/checkout@v4
        
      - name: ğŸ”’ Authorize with Trusted Publishing
        uses: rust-lang/crates-io-auth-action@v1
        id: auth
              
      - name: ğŸ“¦ Publish Crate
        run: cargo publish